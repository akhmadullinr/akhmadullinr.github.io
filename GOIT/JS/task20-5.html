<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <style>
        body {
            height: 2000px;
            /* подсказка должна работать независимо от прокрутки */
        }
        /* ваши стили */
        .tooltip {
            position: fixed;
            padding: 10px 20px;
            border: 1px solid #b3c9ce;
            border-radius: 4px;
            text-align: center;
            font: italic 14px/1.3 arial, sans-serif;
            color: #333;
            background: #fff;
            box-shadow: 3px 3px 3px rgba(0, 0, 0, .3);
    </style>
</head>

<body>

<p>ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя</p>
<p>ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя ЛяЛяЛя</p>

<button data-tooltip="подсказка длиннее, чем элемент">Короткая кнопка</button>
<button data-tooltip="HTML<br>подсказка">Ещё кнопка</button>

<p>Прокрутите страницу, чтобы ссылки были вверху и проверьте, правильно ли показываются подсказки.</p>


<script>
    // ваш код
    var showingTooltip;

    document.onmouseover = function(event) {
        var target = event.target;
        var id = target.getAttribute('data-tooltip');
        if (!id) return;

        var elem = document.createElement('div');
        elem.className = 'tooltip';
        elem.innerHTML = id;
        document.body.appendChild(elem);
        var coords = target.getBoundingClientRect();

        var left = coords.left + (target.offsetWidth - elem.offsetWidth) / 2;
        if (left < 0) left = 0; // не вылезать за левую границу окна

        var top = coords.top -elem.offsetHeight - 5;
        if (top < 0) { // не вылезать за верхнюю границу окна
            top = coords.top + target.offsetHeight + 5;
        }
        elem.style.left = left + 'px';
        elem.style.top = top + 'px';

        showingTooltip = elem;
    };
    document.onmouseout = function(e) {

        if (showingTooltip) {
            document.body.removeChild(showingTooltip);
            showingTooltip = null;
        }
    };
</script>

</body>

</html>